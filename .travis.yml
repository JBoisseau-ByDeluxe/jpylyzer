language: python

python:
  - "2.7"
  - "3.4"
  - "3.5"

before_install:
  - python --version
  - pip install -U pip
  - pip install -U pytest
  - pip install -U pyinstaller
  - pip install -U codacy-coverage

install:
  - pip install .[testing]

before_script:
  - pylint ./jpylyzer

script:
  - pre-commit run --all-files --verbose
  - pytest --cov=jpylyzer
  - ./build-with-pyinstaller.sh

after_success:
  - coverage xml
  - python-codacy-coverage -r coverage.xml
  - ./pyi-build/dist/jpylyzer --version
